name: Build and Release Ghost Theme

on: [push]

jobs:
  build-and-release:
    name: Build and Release Ghost Theme

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1

    - name: build
      id: build
      uses: foolscapcon/action-build-ghost-theme@v1.0.7

    - name: examine
      run: echo ${{ toJson(steps) }}; echo ${{ toJson(steps.build) }}; echo ${{ toJson(steps.build.outputs) }}; echo ${{ steps.build.outputs.release_file }}; echo ${{ steps.build.outputs.release_name }}

    - name: artifact
      uses: actions/upload-artifact@master
      with:
        path: ${{ steps.build.outputs.release_file }}
        name: ${{ steps.build.outputs.release_name }}

    - name: upload
      uses: svenstaro/upload-release-action@1.0.1
      with:
        file: ${{ steps.build.outputs.file }}
        asset_name: ${{ steps.build.outputs.name }}
        tag: ${{ steps.build.outputs.tag }}
        repo_token: ${{ secrets.GITHUB_TOKEN }}
